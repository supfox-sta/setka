{extends "../@layout.xml"}

{block title}Редактирование — {$title} — {$club->getName()}{/block}
<script n:syntax="off"></script>

{block header}
  Редактирование страницы
{/block}

{block content}
  <div class="clear_fix">
    <div class="left_big_block">
      <div class="page_block">
        <div class="page_block_header clear_fix">
          <div class="page_block_header_inner _header">
            <h1 class="page_block_h1">{$title}</h1>
            <div class="right">
              <a href="{$club->getURL()}/wiki/{$slug}">К странице</a>
            </div>
          </div>
        </div>
        <div class="page_block_content">
  <form method="post">
    <input type="hidden" name="hash" value="{$csrfToken}" />
    <div style="margin-top:6px;">
      <label>Заголовок</label>
      <input type="text" name="title" value="{$title}" />
    </div>
    <div>
      <label>Доступ</label>
      <select name="visibility">
        <option value="0"{if $visibility == 0} selected{/if}>Все пользователи</option>
        <option value="1"{if $visibility == 1} selected{/if}>Только участники сообщества</option>
        <option value="2"{if $visibility == 2} selected{/if}>Только руководители сообщества</option>
      </select>
    </div>
    <div style="margin-top:6px;">
      <label>Текст (VK-вики)</label>
      <textarea name="body_wiki" rows="20" cols="80">{$body_wiki}</textarea>
    </div>
    <div style="margin-top:6px;">
      <label><input type="checkbox" name="show_menu"{if $show_menu} checked{/if}> Показывать меню по заголовкам</label>
    </div>
    <div style="margin-top:10px;display:flex;gap:8px;">
      <button type="submit" class="button button_primary">Сохранить</button>
      <a href="{$club->getURL()}/wiki/{$slug}" class="button">Отмена</a>
    </div>
  </form>
        </div>
      </div>
    </div>
    <div class="right_small_block">
      <div class="page_block">
        <div class="page_block_header">
          <div class="page_block_h2">Подсказки</div>
        </div>
        <div class="page_block_content" n:syntax="off">
          <ul class="list_docs">
            <li class="list_item"><b>Заголовки</b>: <code>== H2 ==</code>, <code>=== H3 ===</code> … <code>====== H6 ======</code></li>
            <li class="list_item"><b>Жирный</b>: <code>'''текст'''</code> • <b>Курсив</b>: <code>''текст''</code></li>
            <li class="list_item"><b>Зачёркнутый</b>: <code>&lt;s&gt;текст&lt;/s&gt;</code> • <b>Подчёркнутый</b>: <code>&lt;u&gt;текст&lt;/u&gt;</code></li>
            <li class="list_item"><b>Верхний/нижний индекс</b>: <code>&lt;sup&gt;текст&lt;/sup&gt;</code> / <code>&lt;sub&gt;текст&lt;/sub&gt;</code></li>
            <li class="list_item"><b>Моноширинный</b>: <code>&lt;tt&gt;код&lt;/tt&gt;</code> или <code>&lt;code&gt;код&lt;/code&gt;</code></li>
            <li class="list_item"><b>Цвет/выравнивание</b>: серый <code>&lt;gray&gt;текст&lt;/gray&gt;</code>, по центру <code>&lt;center&gt;...&lt;/center&gt;</code>, вправо <code>&lt;right&gt;...&lt;/right&gt;</code></li>
            <li class="list_item"><b>Списки</b>: маркированный <code>* пункт</code>, нумерованный <code># пункт</code> (вложенность — повтор маркера)</li>
            <li class="list_item"><b>Цитата</b>: строка с <code>&gt; Текст</code> или <code>&lt;blockquote&gt;...&lt;/blockquote&gt;</code></li>
            <li class="list_item"><b>Ссылки</b>: внутренняя <code>[[slug|Текст]]</code>, внешняя <code>https://example.com</code></li>
            <li class="list_item"><b>Внутренние ссылки с якорями</b>: на заголовок <code>[[slug#h2-zagolovok|К разделу]]</code> (ид якоря генерится из текста заголовка); на начало страницы <code>[[slug|К началу]]</code></li>
            <li class="list_item"><b>Картинка (URL)</b>: <code>[[img:https://site/pic.jpg|w=300]]</code> • с высотой <code>|h=150</code> • выравнивание <code>|align=center|right</code></li>
            <li class="list_item"><b>Медиа (ВК‑ссылки)</b>: фото <code>[[photo-1_2]]</code> или <code>[[photo1_2]]</code>, видео <code>[[video-1_2]]</code>, аудио <code>[[audio-1_2]]</code></li>
            <li class="list_item"><b>Спойлер</b>: <code>{{spoiler|текст}}</code></li>
            <li class="list_item"><b>Разделитель</b>: строка из 4+ дефисов <code>----</code></li>
            <li class="list_item"><b>Таблицы</b>:
              <pre style="white-space:pre-wrap;margin:4px 0 0;">{|
|-
| A1 || B1 || C1
|-
| A2 || B2 || C2
|-
| A3 || B3 || C3
|}</pre>
            </li>
            <li class="list_item"><b>Якоря</b>: создаются автоматически из заголовков; работает оглавление</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
{/block}
<style n:syntax="off">
  .wiki_content h2{font-size:18px;line-height:1.3;margin:12px 0 6px;font-weight:700}
  .wiki_content h3{font-size:16px;line-height:1.3;margin:10px 0 6px;font-weight:700}
  .wiki_content h4{font-size:14px;line-height:1.3;margin:8px 0 4px;font-weight:600}
  .wiki_content h5,.wiki_content h6{font-size:13px;line-height:1.3;margin:6px 0 4px;color:#55677d;font-weight:600}
</style>
